(this.webpackJsonpshuffly=this.webpackJsonpshuffly||[]).push([[0],{22:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n(16),a=n.n(s),i=(n(22),n(13)),c=n(4),o=n(5),l=n(7),u=n(6),p=n(39),d=n(40),h=n(41);n(23);n(24);var j=n.p+"static/media/logo.b1cdd032.png",f=n(0),b=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"login",value:function(){var e=function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}(16),t="https://accounts.spotify.com/authorize?response_type=token&client_id="+encodeURIComponent("7306ac07764749518aca94d65ccfe50d")+"&scope="+encodeURIComponent(["playlist-read-private","playlist-modify-public","playlist-modify-private"].join(" "))+"&redirect_uri="+encodeURIComponent("https://dvd-z.github.io/shuffly/app")+"&state="+encodeURIComponent(e);window.location=t}},{key:"render",value:function(){var e=this;return Object(f.jsxs)("div",{id:"background",children:[Object(f.jsxs)("div",{id:"text-container",children:[Object(f.jsxs)("span",{id:"welcome",children:[Object(f.jsx)("span",{role:"img","aria-label":"Hand wave",children:"\ud83d\udc4b"}),"\xa0\xa0Hey there, welcome to Shuffly"]}),Object(f.jsx)("span",{id:"description",children:"Shuffly is a service that directly accesses your Spotify playlists to randomly reorder the tracks on them in place"}),Object(f.jsxs)("div",{id:"button-container",children:[Object(f.jsx)("button",{className:"SpotifyButton",onClick:function(){return e.login()},children:"LOG IN WITH SPOTIFY"}),Object(f.jsx)("span",{id:"powered-by",children:"Powered by Spotify API"}),Object(f.jsx)("span",{id:"github",children:Object(f.jsx)("a",{href:"https://github.com/dvd-z/shuffly",children:"Check out the code on GitHub"})})]})]}),Object(f.jsx)("div",{id:"img-wrapper",children:Object(f.jsx)("img",{alt:"Shuffly logo",id:"logo",src:j})})]})}}]),n}(r.Component),y=n(11),O=(n(26),n(10)),v=n.n(O),m=(n(27),new v.a),x=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).state={shuffling:!1},r}return Object(o.a)(n,[{key:"fetchNewArt",value:function(e){this.props.fetchNewArt(e)}},{key:"shufflePlaylist",value:function(){var e=this;this.setState({shuffling:!0});var t=this.props.playlist.tracks.total-1,n=setInterval((function(){var r=Math.floor(Math.random()*(t+1));e.swap(t,r),--t<=0&&(clearInterval(n),e.fetchNewArt(e.props.id),e.setState({shuffling:!1}))}),100)}},{key:"swap",value:function(e,t){m.reorderTracksInPlaylist(this.props.playlist.id,t,e+1).catch((function(e){var t=JSON.parse(e.response);console.error(t.error)}))}},{key:"render",value:function(){var e,t,n,r=this;return Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{id:"playlist-container",children:[Object(f.jsxs)("div",{id:"playlist-metadata",children:[Object(f.jsx)("img",{id:"playlist-art",alt:this.props.playlist.name+" album art",src:null!==(e=null===(t=this.props.playlist.images)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.url)&&void 0!==e?e:"data:,",height:"64"}),Object(f.jsxs)("span",{id:"playlist-descriptions",children:[Object(f.jsx)("span",{id:"playlist-title",children:Object(f.jsx)("a",{id:"playlist-link",href:this.props.playlist.external_urls.spotify,children:this.props.playlist.name})}),Object(f.jsxs)("div",{id:"playlist-songs-container",children:[Object(f.jsx)("span",{id:"playlist-songs",children:this.props.playlist.tracks.total}),Object(f.jsx)("span",{id:"songs-text",children:"\xa0songs"})]})]})]}),Object(f.jsx)("button",{id:"playlist-shuffle",disabled:this.state.shuffling,className:"SpotifyButton ShuffleButton",onClick:function(){return r.shufflePlaylist()},children:this.state.shuffling?"SHUFFLING...":"SHUFFLE"})]}),Object(f.jsx)("hr",{})]})}}]),n}(r.Component),g=new v.a,w=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).state={index:0,playlists:[]},e.fetchNewArt=e.fetchNewArt.bind(Object(y.a)(e)),e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;g.getUserPlaylists({index:this.state.index}).then((function(t){return e.setState({playlists:t.items.filter((function(t){return t.owner.id===e.props.userId}))})})).catch((function(e){var t=JSON.parse(e.response);console.error(t.error)}))}},{key:"fetchNewArt",value:function(e){var t=this;g.getPlaylist(e,{fields:"images"}).then((function(n){var r=t.state.playlists;r[t.state.playlists.findIndex((function(t){return t.id===e}))].images=n.images,t.setState({playlists:r})})).catch((function(e){var t=JSON.parse(e.response);console.error(t.error)}))}},{key:"render",value:function(){var e=this,t=this.state.playlists.filter((function(t){return t.name.toLocaleLowerCase().includes(e.props.query.toLocaleLowerCase())})).map((function(t){return Object(f.jsx)(x,{fetchNewArt:e.fetchNewArt,id:t.id,playlist:t},t.id)}));return Object(f.jsxs)("div",{id:"playlists-container",children:[Object(f.jsx)("span",{id:"your-playlists-wrapper",children:Object(f.jsx)("h3",{id:"your-playlists",children:"Your Playlists"})}),Object(f.jsx)("div",{className:"scroller",children:t})]})}}]),n}(r.Component),k=(n(28),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).handleChange=function(t){e.setState({query:t.target.value}),e.props.propagateQuery(t.target.value)},e.state={query:""},e}return Object(o.a)(n,[{key:"render",value:function(){return Object(f.jsx)("div",{id:"search-wrapper",children:Object(f.jsx)("input",{className:"search",type:"text",value:this.state.query,onChange:this.handleChange,placeholder:"Search"})})}}]),n}(r.Component)),S=(n(29),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e,t,n;return this.props.user?((null===(e=this.props.user.images)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.url)&&(n=Object(f.jsx)("img",{alt:"Profile",src:this.props.user.images[0].url,height:"64",id:"display-picture"})),Object(f.jsxs)("div",{id:"user-container",children:[n,Object(f.jsx)("p",{children:this.props.user.display_name})]})):null}}]),n}(r.Component)),C=(n(30),new v.a),N=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).state={query:"",user:null},e.propagateQuery=e.propagateQuery.bind(Object(y.a)(e)),e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;C.getMe().then((function(t){return e.setState({user:t})})).catch((function(e){var t=JSON.parse(e.response);console.error(t.error)}))}},{key:"propagateQuery",value:function(e){this.setState({query:e})}},{key:"render",value:function(){var e;return Object(f.jsxs)("div",{id:"menu-container",children:[Object(f.jsxs)("div",{id:"header-container",children:[Object(f.jsx)(k,{propagateQuery:this.propagateQuery,query:this.state.query}),Object(f.jsx)(S,{user:this.state.user})]}),Object(f.jsx)(w,{params:this.props.params,query:this.state.query,userId:null===(e=this.state.user)||void 0===e?void 0:e.id})]})}}]),n}(r.Component),I=function(){return Object(f.jsx)("h1",{children:"Page not found"})};function q(){for(var e,t={},n=/([^&;=]+)=?([^&;]*)/g,r=window.location.hash.substring(1);e=n.exec(r);)t[e[1]]=decodeURIComponent(e[2]);return t}var A=new v.a,P=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).state={params:q(),query:""},e.state.params.access_token&&A.setAccessToken(e.state.params.access_token),e}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(p.a,{basename:"/shuffly",children:Object(f.jsx)("div",{children:Object(f.jsxs)(d.a,{children:[Object(f.jsx)(h.a,{exact:!0,path:"/",component:b}),Object(f.jsx)(h.a,{exact:!0,path:"/app",render:function(t){return Object(f.jsx)(N,Object(i.a)(Object(i.a)({},t),{},{params:e.state.params,query:e.state.query,user:e.state.user}))}}),Object(f.jsx)(h.a,{component:I})]})})})})}}]),n}(r.Component);n(34).config(),a.a.render(Object(f.jsx)(P,{}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.28f353d5.chunk.js.map